<!DOCTYPE html>
<html>
<head>
    <title>Fraud Detection API</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .endpoint { background: #f5f5f5; padding: 15px; margin: 10px 0; border-radius: 5px; }
        .method { color: white; padding: 5px 10px; border-radius: 3px; }
        .post { background: #28a745; }
        .get { background: #007bff; }
        button { background: #007bff; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; }
        textarea { width: 100%; height: 100px; }
        .result { background: #e9ecef; padding: 10px; margin: 10px 0; border-radius: 5px; }
    </style>
</head>
<body>
    <h1>üõ°Ô∏è Credit Card Fraud Detection API</h1>
    
    <div class="endpoint">
        <h3><span class="method get">GET</span> /health</h3>
        <p>Check service health and metrics</p>
        <button onclick="checkHealth()">Test Health</button>
        <div id="health-result" class="result"></div>
    </div>
    
    <div class="endpoint">
        <h3><span class="method post">POST</span> /predict</h3>
        <p>Predict fraud for single transaction</p>
        <textarea id="predict-input" placeholder='{"features": {"V1": 0.1, "V2": 0.2, ..., "Amount": 100.0}}'></textarea>
        <br><button onclick="predict()">Predict Fraud</button>
        <div id="predict-result" class="result"></div>
    </div>
    
    <div class="endpoint">
        <h3><span class="method get">GET</span> /metrics</h3>
        <p>View service metrics</p>
        <button onclick="getMetrics()">Get Metrics</button>
        <div id="metrics-result" class="result"></div>
    </div>

    <script>
        const baseUrl = 'http://localhost:8080';
        
        async function checkHealth() {
            try {
                const response = await fetch(`${baseUrl}/health`);
                const data = await response.json();
                document.getElementById('health-result').innerHTML = 
                    `<pre>${JSON.stringify(data, null, 2)}</pre>`;
            } catch (error) {
                document.getElementById('health-result').innerHTML = 
                    `<span style="color: red;">Error: ${error.message}</span>`;
            }
        }
        
        async function predict() {
            try {
                const input = document.getElementById('predict-input').value || 
                    '{"features": {"V1": 0.1, "V2": 0.2, "V3": 0.3, "V4": 0.4, "V5": 0.5, "V6": 0.6, "V7": 0.7, "V8": 0.8, "V9": 0.9, "V10": 1.0, "V11": 1.1, "V12": 1.2, "V13": 1.3, "V14": 1.4, "V15": 1.5, "V16": 1.6, "V17": 1.7, "V18": 1.8, "V19": 1.9, "V20": 2.0, "V21": 2.1, "V22": 2.2, "V23": 2.3, "V24": 2.4, "V25": 2.5, "V26": 2.6, "V27": 2.7, "V28": 2.8, "Amount": 150.0}}';
                
                const response = await fetch(`${baseUrl}/predict`, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: input
                });
                const data = await response.json();
                document.getElementById('predict-result').innerHTML = 
                    `<pre>${JSON.stringify(data, null, 2)}</pre>`;
            } catch (error) {
                document.getElementById('predict-result').innerHTML = 
                    `<span style="color: red;">Error: ${error.message}</span>`;
            }
        }
        
        async function getMetrics() {
            try {
                const response = await fetch(`${baseUrl}/metrics`);
                const data = await response.json();
                document.getElementById('metrics-result').innerHTML = 
                    `<pre>${JSON.stringify(data, null, 2)}</pre>`;
            } catch (error) {
                document.getElementById('metrics-result').innerHTML = 
                    `<span style="color: red;">Error: ${error.message}</span>`;
            }
        }
    </script>
</body>
</html>